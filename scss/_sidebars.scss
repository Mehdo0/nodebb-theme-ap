// Sidebar control and bottom navigation transformations for AP theme
// This file uses broad selectors to target common Harmony structures
// and provide a CSS-only solution (non-invasive) to disable the right
// widget sidebar and convert the left navigation to a bottom bar.

// 1) Hide right widget sidebar containers (Harmony/widget-area)
[data-widget-area="sidebar"],
.page .col-sidebar-right,
.col-sidebar-right,
aside.sidebar-right,
aside.col-sidebar,
aside.right-sidebar,
.widget-area.sidebar,
#sidebar, /* defensive */
.side-column,
.home-sidebar,
.sidebar {
  display: none !important;
}

// 2) Expand main content to use full width
/* Target likely main content containers used by Harmony */
main, .ap-main, .page, .content, #content, .col-main, .col-content, .main {
  width: 100% !important;
  max-width: 100% !important;
  flex: 1 1 100% !important;
}

// 3) Transform left navigation into a bottom-fixed bar
// The left navigation in Harmony uses a few possible selectors; we target
// them broadly and create a bottom-bar container that uses the nav markup.

/* Common left nav selectors */
[component="navigation"],
nav[component="navigation"],
.nav-pills.nav-stacked,
.sidebar-left,
.left-sidebar,
.col-sidebar-left,
#nav, /* defensive */
#left-nav {
  /* move out of normal flow */
  position: fixed !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  top: auto !important;
  width: 100% !important;
  z-index: 1050 !important;
  background: $ap-dark-green !important; /* uses AP variable if available */
  border-top: 1px solid rgba(0,0,0,0.06) !important;
  display: flex !important;
  justify-content: space-around !important;
  align-items: center !important;
  padding: $ap-gap-xs 0 !important;
  min-height: 56px !important;
}

// Force vertical nav lists into horizontal layout
[component="navigation"] .nav,
.nav-pills,
.nav-stacked,
.sidebar-left ul,
.left-sidebar ul,
.col-sidebar-left ul,
#left-nav ul {
  display: flex !important;
  flex-direction: row !important;
  width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  list-style: none !important;
}

[component="navigation"] .nav .nav-item,
.nav-pills .nav-item,
.sidebar-left .nav-item,
.left-sidebar .nav-item {
  flex: 1 1 auto !important;
  text-align: center !important;
  margin: 0 !important;
}

[component="navigation"] .nav .nav-link,
.nav-pills .nav-link,
.sidebar-left .nav-link,
.left-sidebar .nav-link {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  color: $ap-light-gray !important;
  opacity: 0.9 !important;
  padding: 6px 8px !important;
  font-size: 0.85rem !important;
  border-radius: 0 !important;
}

[component="navigation"] .nav .nav-link .icon,
.nav-pills .nav-link .icon,
.nav-pills .nav-link i,
.sidebar-left .nav-link i {
  font-size: 1.2rem !important;
  margin-bottom: 4px !important;
}

[component="navigation"] .nav .nav-link.active,
.nav-pills .nav-link.active,
.sidebar-left .nav-link.active {
  color: $ap-gold !important;
  opacity: 1 !important;
}

// 4) Hide redundant header-navigation elements (if present)
.header-navigation,
.navbar-left,
.navbar-side {
  display: none !important;
}

// 5) Prevent page content from being hidden under fixed bottom nav
body, .page, .content, .ap-main, main, #content {
  padding-bottom: 64px !important; /* match min-height + spacing */
}

// 6) Responsive: on very small screens make items compact
@media (max-width: 480px) {
  [component="navigation"] .nav .nav-link,
  .nav-pills .nav-link {
    font-size: 0.75rem !important;
    padding: 6px 4px !important;
  }
  body, .page, .content { padding-bottom: 72px !important; }
}

// 7) Defensive: ensure no leftover sidebar separators show
.sidebar-sep, ._sidebar-sep, .divider-bottom { display: none !important; }
